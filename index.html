<!doctype html>
<html ng-app="musicdb">
<head>
    <meta content="text/html;charset=utf-8" http-equiv="Content-Type">
    <meta content="utf-8" http-equiv="encoding">
    <link rel="stylesheet" href="bower_components/bootstrap/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="app/css/main.css">
</head>
<body ng-controller="PageCtrl">

    <div class="container">
        
        <div class="row section">
            <div class="col-md-8">
                    <h2>Search artist</h2>
                    <div id="custom-search-input">
                        <div class="input-group col-md-12">
                            <input type="text" class="form-control input-lg" placeholder="Coldplay" ng-init="searchQuery='Coldplay'" ng-model="searchQuery"/>
                            <span class="input-group-btn">
                                <button class="btn btn-info btn-lg" type="button" ng-click="searchArtist(searchQuery)">
                                    <i class="glyphicon glyphicon-search"></i>
                                </button>
                            </span>
                        </div>
                        <span> E.g. <i>Coldplay</i>, <i>Metallica</i></span>
                    </div>
                    <div ng-hide="artistPresent" class="list-result" ng-repeat="row in artistResults">
                        <a href ng-click="getArtist(row.id)">{{row.name}}</a>
                    </div>

                    <div ng-show="artistPresent">
                        <h3> {{artist.name}} </h3>
                        <ul class="list-inline">
                           <li ng-repeat="tag in artist.tags"> {{tag.name}} </li>
                        </ul>
                        <h4> Discography </h4>
                        <table class="table">
                        <thead>
                            <tr>
                                <th> Year </th>
                                <th> Name </th>
                                <th> Rating </th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr ng-repeat="release in artist.release_groups">
                                <td> {{release.meta.first_release_date_year}} </td>
                                <td> {{release.name}} </td>
                                <td> {{release.meta.rating}} </td>
                            </tr>
                        </tbody>
                        </table>
                    </div>

                    <div ng-show="artistResults.length == 0 && !artistPresent" class="list-result">
                        <span> Sorry, no artist found </span>
                    </div> 
                </div>

            <div class="col-md-4 well">
                <p>This is a search query</p>
            </div>    
        </div>

        <div class="row section">
            <div class="col-md-8">
                <h2>Tags</h2>
                <div ng-show="!tagExpanded" class="tag-cloud">
                    <ul class="list-inline">
                       <li ng-repeat="tag in tagCloud"> <a href ng-click="getTagDetails(tag.id)">{{tag.name}}</a></li>
                    </ul>
                </div>

                <div ng-show="tagExpanded">
                    <a href ng-click="tagExpanded=!tagExpanded;">&larr; All tags</a>
                    <h4>Tag: {{tagDetails.name}}</h4>

                    <div class="row">
                        <div class="col-md-6">
                            <table>
                            <thead>
                                <tr>
                                    <th>Artists</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr ng-repeat="artist in artistsTag">
                                    <td>{{artist.artist_details.name}}</td>
                                </tr>
                            </tbody>
                            </table>

                        </div>
                        <div class="col-md-6">
                            <table>
                            <thead>
                                <tr>
                                    <th>Events</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr ng-repeat="event in eventsTag">
                                    <td>{{event.event_details.name}}</td>
                                </tr>
                            </tbody>
                            </table>
                        </div>
                    </div>

                </div>
            </div>

            <div class="col-md-4 well">
                <p>This shows a multi query to display data from 2 tables. Traditonally, you may have to use two queries to do this kind of operation.</p>
            </div>
        </div>

        <div class="row section">
                <div class="col-md-8">
                    <h2>Recent Additions</h2>
                    <ul class="pagination">
                        <li><a href ng-click="getLatestReleases(currentOffset - 10)">&laquo;</a></li>
                        <li><a href ng-click="getLatestReleases(currentOffset + 10)">&raquo;</a></li>
                    </ul>
                    <table class="table">
                    <thead>
                        <tr>
                            <th> Album </th>
                            <th> Artist </th>
                            <th> Release Date </th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr ng-repeat="release in latestReleases">
                            <td> {{release.parent.name}} </td>
                            <td> {{release.parent.artist.name}} </td>
                            <td> {{ getDate(release) | date }} </td>
                        </tr>
                    </tbody>
                    </table>
                </div>

                <div class="col-md-4 well">
                    <p> This is another query to show the implementation of pagination</p>
                </div>
        </div>            

        <div class="row section">
            <div class="col-md-8">
                <h2>Analytics</h2>
            </div>

            <div class="col-md-4 well">
                <p>This is another query to show how a complex join query can be easily accessed using view</p>
            </div>
        </div>

    </div>

    <script src="bower_components/jquery/dist/jquery.min.js"></script>
    <script src="bower_components/bootstrap/dist/js/bootstrap.min.js"></script>
    <script src="bower_components/angular/angular.min.js"></script>
    <script src="app/js/main.js"></script>
</body>
</html>
